import{r as g,j as l}from"./index-BDXrdLvm.js";const p={H:{name:"Hadamard",description:"Creates superposition |0⟩→|+⟩, |1⟩→|-⟩",color:"#6496ff",category:"single"},X:{name:"Pauli-X",description:"Bit flip (NOT gate)",color:"#ff6666",category:"single"},Y:{name:"Pauli-Y",description:"Bit + phase flip",color:"#66cc66",category:"single"},Z:{name:"Pauli-Z",description:"Phase flip |1⟩→-|1⟩",color:"#ffcc44",category:"single"},S:{name:"S Gate",description:"Phase gate π/2 (√Z)",color:"#ff66ff",category:"single"},T:{name:"T Gate",description:"Phase gate π/4 (√S)",color:"#66ffff",category:"single"},Sdg:{name:"S†",description:"S-dagger (inverse S)",color:"#cc44cc",category:"single",symbol:"S†"},Tdg:{name:"T†",description:"T-dagger (inverse T)",color:"#44cccc",category:"single",symbol:"T†"},SX:{name:"√X",description:"Square root of X",color:"#ff8888",category:"single",symbol:"√X"},I:{name:"Identity",description:"Identity (no operation)",color:"#888888",category:"single"},Rx:{name:"Rx(θ)",description:"X-axis rotation",color:"#ff4444",category:"rotation",needsAngle:!0},Ry:{name:"Ry(θ)",description:"Y-axis rotation",color:"#44ff44",category:"rotation",needsAngle:!0},Rz:{name:"Rz(θ)",description:"Z-axis rotation",color:"#ffff44",category:"rotation",needsAngle:!0},P:{name:"Phase(θ)",description:"Phase rotation",color:"#ff88ff",category:"rotation",symbol:"P",needsAngle:!0},U:{name:"U Gate",description:"Universal single-qubit gate",color:"#8888ff",category:"rotation",needsAngle:!0},CNOT:{name:"CNOT",description:"Controlled-X (CX)",color:"#9966ff",category:"two-qubit",symbol:"CX",needsControl:!0},CY:{name:"CY",description:"Controlled-Y",color:"#66aa66",category:"two-qubit",needsControl:!0},CZ:{name:"CZ",description:"Controlled-Z",color:"#ff9966",category:"two-qubit",needsControl:!0},CH:{name:"CH",description:"Controlled-Hadamard",color:"#6699ff",category:"two-qubit",needsControl:!0},CP:{name:"CPhase",description:"Controlled-Phase",color:"#cc66ff",category:"two-qubit",needsControl:!0,needsAngle:!0},SWAP:{name:"SWAP",description:"Swap two qubits",color:"#66ff99",category:"two-qubit",symbol:"⨯"},iSWAP:{name:"iSWAP",description:"iSWAP gate",color:"#99ff66",category:"two-qubit",symbol:"i⨯"},DCX:{name:"DCX",description:"Double CNOT",color:"#aa66ff",category:"two-qubit"},CCX:{name:"Toffoli",description:"Controlled-Controlled-X (CCX)",color:"#ff66cc",category:"three-qubit",symbol:"CCX",needsTwoControls:!0},CCZ:{name:"CCZ",description:"Controlled-Controlled-Z",color:"#ffaa66",category:"three-qubit",needsTwoControls:!0},CSWAP:{name:"Fredkin",description:"Controlled-SWAP",color:"#66ffcc",category:"three-qubit",needsTwoControls:!0},M:{name:"Measure",description:"Measurement in Z basis",color:"#ffffff",category:"special",symbol:"M"},Reset:{name:"Reset",description:"Reset qubit to |0⟩",color:"#aaaaaa",category:"special",symbol:"|0⟩"},Barrier:{name:"Barrier",description:"Visual separator (no operation)",color:"#555555",category:"special",symbol:"│"}},z=12,_=8,q={"Single Qubit":["H","X","Y","Z","S","T","Sdg","Tdg","SX","I"],Rotations:["Rx","Ry","Rz","P","U"],"Two Qubit":["CNOT","CY","CZ","CH","CP","SWAP","iSWAP","DCX"],"Three Qubit":["CCX","CCZ","CSWAP"],Special:["M","Reset","Barrier"]},U=()=>{const[C,A]=g.useState({numQubits:3,numSlots:z,gates:[]}),[x,k]=g.useState([]),[m,w]=g.useState(null),[X,R]=g.useState(!1),[Q,D]=g.useState("Single Qubit"),[N,j]=g.useState("target"),[u,P]=g.useState(null),[v,$]=g.useState(Math.PI/2),I=g.useRef(null),W=g.useRef(null),T=g.useCallback((e,t)=>C.gates.find(o=>(o.qubit===e||o.controlQubit===e||o.controlQubit2===e||o.targetQubit===e)&&o.timeSlot===t),[C.gates]),Z=e=>{const t=p[e];return t.needsControl||t.needsTwoControls||e==="SWAP"||e==="iSWAP"||e==="DCX"},B=g.useCallback((e,t)=>{if(!m)return;const o=p[m],h=T(e,t);if(h&&!u){A(r=>({...r,gates:r.gates.filter(i=>i.id!==h.id)}));return}if(Z(m)){if(o.needsTwoControls){if(N==="control1"){P({timeSlot:t,controlQubit:e}),j("control2");return}else if(N==="control2"&&u){if(e===u.controlQubit)return;P({...u,controlQubit2:e}),j("target");return}else if(N==="target"&&(u==null?void 0:u.controlQubit)!==void 0&&(u==null?void 0:u.controlQubit2)!==void 0){if(e===u.controlQubit||e===u.controlQubit2)return;const r={id:`gate-${Date.now()}-${Math.random()}`,type:m,qubit:e,timeSlot:u.timeSlot,controlQubit:u.controlQubit,controlQubit2:u.controlQubit2,angle:o.needsAngle?v:void 0};A(i=>({...i,gates:[...i.gates,r]})),P(null),j("control1");return}}else if(o.needsControl||m==="SWAP"||m==="iSWAP"||m==="DCX"){if(N==="control1"){P({timeSlot:t,controlQubit:e}),j("target");return}else if(N==="target"&&(u==null?void 0:u.controlQubit)!==void 0){if(e===u.controlQubit)return;const r={id:`gate-${Date.now()}-${Math.random()}`,type:m,qubit:e,timeSlot:u.timeSlot,controlQubit:u.controlQubit,angle:o.needsAngle?v:void 0};A(i=>({...i,gates:[...i.gates,r]})),P(null),j("control1");return}}}if(Z(m)){P({timeSlot:t}),j((o.needsTwoControls,"control1")),B(e,t);return}const f={id:`gate-${Date.now()}-${Math.random()}`,type:m,qubit:e,timeSlot:t,angle:o.needsAngle?v:void 0};A(r=>({...r,gates:[...r.gates,f]}))},[m,T,u,N,v]),E=g.useCallback(()=>{A(e=>({...e,gates:[]})),k([]),P(null),j("control1")},[]),G=g.useCallback(e=>{A({numQubits:e,numSlots:z,gates:[]}),k([]),P(null)},[]),H=g.useCallback(e=>{m===e?(w(null),P(null),j("control1")):(w(e),P(null),j(p[e].needsTwoControls||p[e].needsControl||e==="SWAP"||e==="iSWAP"||e==="DCX"?"control1":"target"))},[m]),O=g.useCallback(async()=>{R(!0),await new Promise(r=>setTimeout(r,300));const e=Math.pow(2,C.numQubits),t=[...C.gates].sort((r,i)=>r.timeSlot-i.timeSlot);let o=new Array(e).fill(null).map((r,i)=>i===0?[1,0]:[0,0]);const h=Math.sqrt(2);for(const r of t){const i=r.qubit,d=o.map(s=>[...s]);switch(r.type){case"H":{for(let s=0;s<e;s++){const n=s>>i&1,a=n===0?s|1<<i:s&~(1<<i);n===0&&(d[s]=[(o[s][0]+o[a][0])/h,(o[s][1]+o[a][1])/h],d[a]=[(o[s][0]-o[a][0])/h,(o[s][1]-o[a][1])/h])}break}case"X":{for(let s=0;s<e;s++){const n=s^1<<i;d[s]=[...o[n]]}break}case"Y":{for(let s=0;s<e;s++){const n=s>>i&1,a=s^1<<i;n===0?d[a]=[-o[s][1],o[s][0]]:d[a]=[o[s][1],-o[s][0]]}break}case"Z":{for(let s=0;s<e;s++)(s>>i&1)===1&&(d[s]=[-o[s][0],-o[s][1]]);break}case"S":{for(let s=0;s<e;s++)(s>>i&1)===1&&(d[s]=[-o[s][1],o[s][0]]);break}case"T":{const s=Math.cos(Math.PI/4),n=Math.sin(Math.PI/4);for(let a=0;a<e;a++)(a>>i&1)===1&&(d[a]=[o[a][0]*s-o[a][1]*n,o[a][0]*n+o[a][1]*s]);break}case"Sdg":{for(let s=0;s<e;s++)(s>>i&1)===1&&(d[s]=[o[s][1],-o[s][0]]);break}case"Tdg":{const s=Math.cos(Math.PI/4),n=Math.sin(Math.PI/4);for(let a=0;a<e;a++)(a>>i&1)===1&&(d[a]=[o[a][0]*s+o[a][1]*n,-o[a][0]*n+o[a][1]*s]);break}case"SX":{for(let s=0;s<e;s++){const n=s>>i&1,a=s^1<<i;if(n===0){const c=o[s],b=o[a];d[s]=[(c[0]+b[0]+c[1]-b[1])/2,(c[1]+b[1]-c[0]+b[0])/2],d[a]=[(c[0]+b[0]-c[1]+b[1])/2,(c[1]+b[1]+c[0]-b[0])/2]}}break}case"Rx":case"Ry":case"Rz":{const s=r.angle||Math.PI/2,n=Math.cos(s/2),a=Math.sin(s/2);for(let c=0;c<e;c++){const b=c>>i&1,M=c^1<<i;if(b===0){const y=o[c],S=o[M];r.type==="Rx"?(d[c]=[y[0]*n+S[1]*a,y[1]*n-S[0]*a],d[M]=[S[0]*n+y[1]*a,S[1]*n-y[0]*a]):r.type==="Ry"?(d[c]=[y[0]*n-S[0]*a,y[1]*n-S[1]*a],d[M]=[y[0]*a+S[0]*n,y[1]*a+S[1]*n]):(d[c]=[y[0]*n+y[1]*a,y[1]*n-y[0]*a],d[M]=[S[0]*n-S[1]*a,S[1]*n+S[0]*a])}}break}case"CNOT":{const s=r.controlQubit;for(let n=0;n<e;n++)if((n>>s&1)===1){const c=n^1<<i;d[n]=[...o[c]],d[c]=[...o[n]]}break}case"CZ":{const s=r.controlQubit;for(let n=0;n<e;n++){const a=n>>s&1,c=n>>i&1;a===1&&c===1&&(d[n]=[-o[n][0],-o[n][1]])}break}case"SWAP":{const s=r.controlQubit;for(let n=0;n<e;n++){const a=n>>i&1,c=n>>s&1;if(a!==c){const b=n^1<<i^1<<s;n<b&&(d[n]=[...o[b]],d[b]=[...o[n]])}}break}case"CCX":{const s=r.controlQubit,n=r.controlQubit2;for(let a=0;a<e;a++){const c=a>>s&1,b=a>>n&1;if(c===1&&b===1){const M=a^1<<i;d[a]=[...o[M]],d[M]=[...o[a]]}}break}}o=d}const f=o.map(([r,i])=>r*r+i*i);k(f),R(!1)},[C]);g.useEffect(()=>{const e=I.current;if(!e)return;const t=e.getContext("2d");if(!t)return;const o=e.width,h=e.height;if(t.fillStyle="#0d0d1a",t.fillRect(0,0,o,h),x.length===0){t.fillStyle="#404060",t.font="14px sans-serif",t.textAlign="center",t.fillText('Click "Simulate" to see results',o/2,h/2);return}const f=Math.max(4,(o-40)/x.length-2),r=h-60;x.forEach((i,d)=>{const s=20+d*(f+2),n=i*r,a=h-30-n,c=t.createLinearGradient(s,a+n,s,a);if(c.addColorStop(0,"#6496ff"),c.addColorStop(1,"#9966ff"),t.fillStyle=c,t.fillRect(s,a,f,n),x.length<=16){t.fillStyle="#606080",t.font="10px monospace",t.textAlign="center";const b=d.toString(2).padStart(C.numQubits,"0");t.fillText(`|${b}⟩`,s+f/2,h-10)}}),t.strokeStyle="#303050",t.lineWidth=1,t.beginPath(),t.moveTo(15,20),t.lineTo(15,h-30),t.stroke(),t.fillStyle="#606080",t.font="10px sans-serif",t.textAlign="right",t.fillText("1.0",12,25),t.fillText("0.5",12,h/2),t.fillText("0.0",12,h-32)},[x,C.numQubits]),g.useEffect(()=>{const e=W.current;if(!e)return;const t=e.getContext("2d");if(!t)return;const o=e.width,h=e.height,f=o/2,r=h/2,i=Math.min(o,h)/2-30;t.fillStyle="#0d0d1a",t.fillRect(0,0,o,h),t.strokeStyle="rgba(100, 150, 255, 0.3)",t.lineWidth=2,t.beginPath(),t.arc(f,r,i,0,Math.PI*2),t.stroke();const d=(s,n,a)=>{const c=f+Math.cos(s)*i,b=r+Math.sin(s)*i;t.strokeStyle=a,t.lineWidth=1,t.beginPath(),t.moveTo(f,r),t.lineTo(c,b),t.stroke(),t.fillStyle=a,t.font="12px sans-serif",t.textAlign="center",t.fillText(n,c+Math.cos(s)*15,b+Math.sin(s)*15+4)};if(d(-Math.PI/2,"|0⟩","#00ff88"),d(Math.PI/2,"|1⟩","#ff6688"),d(0,"+X","#6496ff"),d(Math.PI,"-X","#6496ff"),x.length===2){const s=Math.acos(Math.sqrt(x[0]))*2,n=f+Math.sin(s)*i*.9,a=r-Math.cos(s)*i*.9;t.strokeStyle="#ffcc00",t.lineWidth=3,t.beginPath(),t.moveTo(f,r),t.lineTo(n,a),t.stroke(),t.fillStyle="#ffcc00",t.beginPath(),t.arc(n,a,6,0,Math.PI*2),t.fill()}},[x]);const Y=()=>{if(!m)return"Select a gate from the palette";const e=p[m];return e.needsTwoControls?N==="control1"?`Click to place first control for ${e.name}`:N==="control2"?`Click to place second control for ${e.name}`:`Click to place target for ${e.name}`:e.needsControl||m==="SWAP"||m==="iSWAP"||m==="DCX"?N==="control1"?`Click to place ${m==="SWAP"||m==="iSWAP"?"first qubit":"control"} for ${e.name}`:`Click to place ${m==="SWAP"||m==="iSWAP"?"second qubit":"target"} for ${e.name}`:`Click to place ${e.name}`};return l.jsxs("div",{className:"playground",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("h1",{className:"section-title",children:"Quantum Circuit Playground"}),l.jsx("p",{className:"section-description",children:"Build quantum circuits interactively. Select a gate, then click on the circuit grid to place it."})]}),l.jsxs("div",{className:"playground-layout",children:[l.jsxs("div",{className:"gate-palette",children:[l.jsx("h3",{className:"palette-title",children:"Gates"}),Object.entries(q).map(([e,t])=>l.jsxs("div",{className:"gate-category",children:[l.jsxs("button",{className:`category-header ${Q===e?"expanded":""}`,onClick:()=>D(Q===e?"":e),children:[l.jsx("span",{children:e}),l.jsx("span",{className:"category-arrow",children:Q===e?"▼":"▶"})]}),Q===e&&l.jsx("div",{className:"gate-grid",children:t.map(o=>l.jsxs("button",{className:`gate-btn ${m===o?"selected":""}`,style:{borderColor:p[o].color},onClick:()=>H(o),title:p[o].description,children:[l.jsx("span",{className:"gate-symbol",style:{color:p[o].color},children:p[o].symbol||o}),l.jsx("span",{className:"gate-name",children:p[o].name})]},o))})]},e)),m&&p[m].needsAngle&&l.jsxs("div",{className:"palette-section",children:[l.jsx("h4",{children:"Rotation Angle"}),l.jsxs("div",{className:"angle-control",children:[l.jsx("input",{type:"range",min:"0",max:2*Math.PI,step:Math.PI/8,value:v,onChange:e=>$(parseFloat(e.target.value))}),l.jsxs("span",{className:"angle-value",children:[(v/Math.PI).toFixed(2),"π"]})]}),l.jsx("div",{className:"angle-presets",children:[["π/4",Math.PI/4],["π/2",Math.PI/2],["π",Math.PI],["3π/2",3*Math.PI/2]].map(([e,t])=>l.jsx("button",{className:`angle-preset ${Math.abs(v-t)<.01?"selected":""}`,onClick:()=>$(t),children:e},e))})]}),l.jsxs("div",{className:"palette-section",children:[l.jsxs("h4",{children:["Qubits (",C.numQubits,")"]}),l.jsx("div",{className:"qubit-selector",children:Array.from({length:_},(e,t)=>t+1).map(e=>l.jsx("button",{className:`qubit-btn ${C.numQubits===e?"selected":""}`,onClick:()=>G(e),children:e},e))})]}),l.jsxs("div",{className:"palette-actions",children:[l.jsx("button",{className:"btn btn-primary",onClick:O,disabled:X,children:X?"Simulating...":"Simulate"}),l.jsx("button",{className:"btn btn-secondary",onClick:E,children:"Clear"})]})]}),l.jsxs("div",{className:"circuit-editor",children:[l.jsx("h3",{children:"Circuit"}),l.jsxs("div",{className:"circuit-grid-container",children:[l.jsxs("div",{className:"time-slot-header",children:[l.jsx("div",{className:"qubit-label-spacer"}),Array.from({length:C.numSlots},(e,t)=>l.jsxs("div",{className:"time-slot-label",children:["t",t]},t)),l.jsx("div",{className:"measurement-spacer"})]}),Array.from({length:C.numQubits},(e,t)=>l.jsxs("div",{className:"qubit-row",children:[l.jsxs("span",{className:"qubit-label",children:["q",t]}),l.jsx("div",{className:"wire-grid",children:Array.from({length:C.numSlots},(o,h)=>{const f=T(t,h),r=(u==null?void 0:u.timeSlot)===h,i=(u==null?void 0:u.controlQubit)===t&&r,d=(u==null?void 0:u.controlQubit2)===t&&r,s=C.gates.find(c=>c.timeSlot===h&&(c.controlQubit===t||c.controlQubit2===t)),n=!!s&&(s.controlQubit===t||s.controlQubit2===t),a=()=>i||d?l.jsx("div",{className:"control-node pending",title:"Control qubit (pending)",children:"●"}):n&&s?l.jsx("div",{className:"control-node",style:{color:p[s.type].color},title:`Control for ${s.type}`,children:"●"}):f&&f.qubit===t?l.jsx("div",{className:`gate-on-grid ${f.type==="Barrier"?"barrier":""}`,style:{backgroundColor:p[f.type].color},title:`${p[f.type].name}${f.angle?` (${(f.angle/Math.PI).toFixed(2)}π)`:""}`,children:p[f.type].symbol||f.type}):null;return l.jsxs("div",{className:`grid-cell ${m?"clickable":""} ${f?"has-gate":""} ${r?"pending-slot":""}`,onClick:()=>B(t,h),children:[l.jsx("div",{className:"wire-segment"}),a(),f&&f.qubit===t&&f.controlQubit!==void 0&&l.jsx("div",{className:"gate-connection",style:{height:`${Math.abs(f.controlQubit-t)*50}px`,top:f.controlQubit<t?`${(f.controlQubit-t)*50+25}px`:"25px",borderColor:p[f.type].color}})]},h)})}),l.jsx("span",{className:"measurement",children:"M"})]},t))]}),l.jsx("p",{className:`hint ${u?"pending":""}`,children:Y()}),u&&l.jsx("button",{className:"btn btn-cancel",onClick:()=>{P(null),j("control1")},children:"Cancel Placement"})]}),l.jsxs("div",{className:"visualization-panel",children:[l.jsxs("div",{className:"viz-card",children:[l.jsx("h3",{children:"Probability Amplitudes"}),l.jsx("canvas",{ref:I,width:400,height:200,className:"viz-canvas"})]}),C.numQubits===1&&l.jsxs("div",{className:"viz-card",children:[l.jsx("h3",{children:"Bloch Sphere"}),l.jsx("canvas",{ref:W,width:200,height:200,className:"viz-canvas"})]}),x.length>0&&l.jsxs("div",{className:"viz-card stats-card",children:[l.jsx("h3",{children:"Statistics"}),l.jsxs("div",{className:"stats-grid",children:[l.jsxs("div",{className:"stat",children:[l.jsx("span",{className:"stat-label",children:"States"}),l.jsx("span",{className:"stat-value",children:x.length})]}),l.jsxs("div",{className:"stat",children:[l.jsx("span",{className:"stat-label",children:"Non-zero"}),l.jsx("span",{className:"stat-value",children:x.filter(e=>e>.001).length})]}),l.jsxs("div",{className:"stat",children:[l.jsx("span",{className:"stat-label",children:"Max Prob"}),l.jsxs("span",{className:"stat-value",children:[(Math.max(...x)*100).toFixed(1),"%"]})]})]})]})]})]})]})};export{U as default};
//# sourceMappingURL=Playground-eRplICCB.js.map
