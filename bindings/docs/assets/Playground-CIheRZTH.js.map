{"version":3,"file":"Playground-CIheRZTH.js","sources":["../../javascript/demo/src/playground/Playground.tsx"],"sourcesContent":["import React, { useState, useCallback, useRef, useEffect } from 'react';\nimport './Playground.css';\n\n// Gate categories for organized display\ntype SingleQubitGate = 'H' | 'X' | 'Y' | 'Z' | 'S' | 'T' | 'Sdg' | 'Tdg' | 'SX' | 'I';\ntype RotationGate = 'Rx' | 'Ry' | 'Rz' | 'P' | 'U';\ntype TwoQubitGate = 'CNOT' | 'CY' | 'CZ' | 'CH' | 'CP' | 'SWAP' | 'iSWAP' | 'DCX';\ntype ThreeQubitGate = 'CCX' | 'CCZ' | 'CSWAP';\ntype SpecialElement = 'M' | 'Reset' | 'Barrier';\n\ntype GateType = SingleQubitGate | RotationGate | TwoQubitGate | ThreeQubitGate | SpecialElement;\n\ninterface Gate {\n  id: string;\n  type: GateType;\n  qubit: number;\n  timeSlot: number;\n  controlQubit?: number;\n  controlQubit2?: number; // For 3-qubit gates\n  targetQubit?: number;   // For multi-qubit gates\n  angle?: number;         // For rotation gates\n}\n\ninterface CircuitState {\n  numQubits: number;\n  numSlots: number;\n  gates: Gate[];\n}\n\ninterface GateInfo {\n  name: string;\n  description: string;\n  color: string;\n  category: 'single' | 'rotation' | 'two-qubit' | 'three-qubit' | 'special';\n  symbol?: string;\n  needsAngle?: boolean;\n  needsControl?: boolean;\n  needsTwoControls?: boolean;\n}\n\nconst GATE_INFO: Record<GateType, GateInfo> = {\n  // Single-qubit gates\n  H: { name: 'Hadamard', description: 'Creates superposition |0⟩→|+⟩, |1⟩→|-⟩', color: '#6496ff', category: 'single' },\n  X: { name: 'Pauli-X', description: 'Bit flip (NOT gate)', color: '#ff6666', category: 'single' },\n  Y: { name: 'Pauli-Y', description: 'Bit + phase flip', color: '#66cc66', category: 'single' },\n  Z: { name: 'Pauli-Z', description: 'Phase flip |1⟩→-|1⟩', color: '#ffcc44', category: 'single' },\n  S: { name: 'S Gate', description: 'Phase gate π/2 (√Z)', color: '#ff66ff', category: 'single' },\n  T: { name: 'T Gate', description: 'Phase gate π/4 (√S)', color: '#66ffff', category: 'single' },\n  Sdg: { name: 'S†', description: 'S-dagger (inverse S)', color: '#cc44cc', category: 'single', symbol: 'S†' },\n  Tdg: { name: 'T†', description: 'T-dagger (inverse T)', color: '#44cccc', category: 'single', symbol: 'T†' },\n  SX: { name: '√X', description: 'Square root of X', color: '#ff8888', category: 'single', symbol: '√X' },\n  I: { name: 'Identity', description: 'Identity (no operation)', color: '#888888', category: 'single' },\n\n  // Rotation gates\n  Rx: { name: 'Rx(θ)', description: 'X-axis rotation', color: '#ff4444', category: 'rotation', needsAngle: true },\n  Ry: { name: 'Ry(θ)', description: 'Y-axis rotation', color: '#44ff44', category: 'rotation', needsAngle: true },\n  Rz: { name: 'Rz(θ)', description: 'Z-axis rotation', color: '#ffff44', category: 'rotation', needsAngle: true },\n  P: { name: 'Phase(θ)', description: 'Phase rotation', color: '#ff88ff', category: 'rotation', symbol: 'P', needsAngle: true },\n  U: { name: 'U Gate', description: 'Universal single-qubit gate', color: '#8888ff', category: 'rotation', needsAngle: true },\n\n  // Two-qubit gates\n  CNOT: { name: 'CNOT', description: 'Controlled-X (CX)', color: '#9966ff', category: 'two-qubit', symbol: 'CX', needsControl: true },\n  CY: { name: 'CY', description: 'Controlled-Y', color: '#66aa66', category: 'two-qubit', needsControl: true },\n  CZ: { name: 'CZ', description: 'Controlled-Z', color: '#ff9966', category: 'two-qubit', needsControl: true },\n  CH: { name: 'CH', description: 'Controlled-Hadamard', color: '#6699ff', category: 'two-qubit', needsControl: true },\n  CP: { name: 'CPhase', description: 'Controlled-Phase', color: '#cc66ff', category: 'two-qubit', needsControl: true, needsAngle: true },\n  SWAP: { name: 'SWAP', description: 'Swap two qubits', color: '#66ff99', category: 'two-qubit', symbol: '⨯' },\n  iSWAP: { name: 'iSWAP', description: 'iSWAP gate', color: '#99ff66', category: 'two-qubit', symbol: 'i⨯' },\n  DCX: { name: 'DCX', description: 'Double CNOT', color: '#aa66ff', category: 'two-qubit' },\n\n  // Three-qubit gates\n  CCX: { name: 'Toffoli', description: 'Controlled-Controlled-X (CCX)', color: '#ff66cc', category: 'three-qubit', symbol: 'CCX', needsTwoControls: true },\n  CCZ: { name: 'CCZ', description: 'Controlled-Controlled-Z', color: '#ffaa66', category: 'three-qubit', needsTwoControls: true },\n  CSWAP: { name: 'Fredkin', description: 'Controlled-SWAP', color: '#66ffcc', category: 'three-qubit', needsTwoControls: true },\n\n  // Special elements\n  M: { name: 'Measure', description: 'Measurement in Z basis', color: '#ffffff', category: 'special', symbol: 'M' },\n  Reset: { name: 'Reset', description: 'Reset qubit to |0⟩', color: '#aaaaaa', category: 'special', symbol: '|0⟩' },\n  Barrier: { name: 'Barrier', description: 'Visual separator (no operation)', color: '#555555', category: 'special', symbol: '│' },\n};\n\nconst NUM_TIME_SLOTS = 12;\nconst MAX_QUBITS = 8;\n\n// Gate categories for the palette\nconst GATE_CATEGORIES = {\n  'Single Qubit': ['H', 'X', 'Y', 'Z', 'S', 'T', 'Sdg', 'Tdg', 'SX', 'I'] as GateType[],\n  'Rotations': ['Rx', 'Ry', 'Rz', 'P', 'U'] as GateType[],\n  'Two Qubit': ['CNOT', 'CY', 'CZ', 'CH', 'CP', 'SWAP', 'iSWAP', 'DCX'] as GateType[],\n  'Three Qubit': ['CCX', 'CCZ', 'CSWAP'] as GateType[],\n  'Special': ['M', 'Reset', 'Barrier'] as GateType[],\n};\n\nconst Playground: React.FC = () => {\n  const [circuit, setCircuit] = useState<CircuitState>({\n    numQubits: 3,\n    numSlots: NUM_TIME_SLOTS,\n    gates: [],\n  });\n  const [probabilities, setProbabilities] = useState<number[]>([]);\n  const [selectedGate, setSelectedGate] = useState<GateType | null>(null);\n  const [isSimulating, setIsSimulating] = useState(false);\n  const [expandedCategory, setExpandedCategory] = useState<string>('Single Qubit');\n  const [controlMode, setControlMode] = useState<'target' | 'control1' | 'control2'>('target');\n  const [pendingGate, setPendingGate] = useState<{ timeSlot: number; controlQubit?: number; controlQubit2?: number } | null>(null);\n  const [rotationAngle, setRotationAngle] = useState<number>(Math.PI / 2);\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const blochCanvasRef = useRef<HTMLCanvasElement>(null);\n\n  const getGateAt = useCallback((qubit: number, timeSlot: number): Gate | undefined => {\n    return circuit.gates.find(g =>\n      (g.qubit === qubit || g.controlQubit === qubit || g.controlQubit2 === qubit || g.targetQubit === qubit)\n      && g.timeSlot === timeSlot\n    );\n  }, [circuit.gates]);\n\n  const isMultiQubitGate = (type: GateType): boolean => {\n    const info = GATE_INFO[type];\n    return info.needsControl || info.needsTwoControls || type === 'SWAP' || type === 'iSWAP' || type === 'DCX';\n  };\n\n  const addGate = useCallback((qubit: number, timeSlot: number) => {\n    if (!selectedGate) return;\n\n    const gateInfo = GATE_INFO[selectedGate];\n\n    // Check if there's already a gate at this position\n    const existingGate = getGateAt(qubit, timeSlot);\n    if (existingGate && !pendingGate) {\n      // Remove existing gate if clicking on it\n      setCircuit(prev => ({\n        ...prev,\n        gates: prev.gates.filter(g => g.id !== existingGate.id),\n      }));\n      return;\n    }\n\n    // Handle multi-qubit gates\n    if (isMultiQubitGate(selectedGate)) {\n      if (gateInfo.needsTwoControls) {\n        // Three-qubit gate: need two controls + target\n        if (controlMode === 'control1') {\n          setPendingGate({ timeSlot, controlQubit: qubit });\n          setControlMode('control2');\n          return;\n        } else if (controlMode === 'control2' && pendingGate) {\n          if (qubit === pendingGate.controlQubit) return; // Same qubit\n          setPendingGate({ ...pendingGate, controlQubit2: qubit });\n          setControlMode('target');\n          return;\n        } else if (controlMode === 'target' && pendingGate?.controlQubit !== undefined && pendingGate?.controlQubit2 !== undefined) {\n          if (qubit === pendingGate.controlQubit || qubit === pendingGate.controlQubit2) return;\n          const newGate: Gate = {\n            id: `gate-${Date.now()}-${Math.random()}`,\n            type: selectedGate,\n            qubit,\n            timeSlot: pendingGate.timeSlot,\n            controlQubit: pendingGate.controlQubit,\n            controlQubit2: pendingGate.controlQubit2,\n            angle: gateInfo.needsAngle ? rotationAngle : undefined,\n          };\n          setCircuit(prev => ({ ...prev, gates: [...prev.gates, newGate] }));\n          setPendingGate(null);\n          setControlMode('control1');\n          return;\n        }\n      } else if (gateInfo.needsControl || selectedGate === 'SWAP' || selectedGate === 'iSWAP' || selectedGate === 'DCX') {\n        // Two-qubit gate: need control + target\n        if (controlMode === 'control1') {\n          setPendingGate({ timeSlot, controlQubit: qubit });\n          setControlMode('target');\n          return;\n        } else if (controlMode === 'target' && pendingGate?.controlQubit !== undefined) {\n          if (qubit === pendingGate.controlQubit) return; // Same qubit\n          const newGate: Gate = {\n            id: `gate-${Date.now()}-${Math.random()}`,\n            type: selectedGate,\n            qubit,\n            timeSlot: pendingGate.timeSlot,\n            controlQubit: pendingGate.controlQubit,\n            angle: gateInfo.needsAngle ? rotationAngle : undefined,\n          };\n          setCircuit(prev => ({ ...prev, gates: [...prev.gates, newGate] }));\n          setPendingGate(null);\n          setControlMode('control1');\n          return;\n        }\n      }\n    }\n\n    // Single-qubit gate or first click for multi-qubit\n    if (isMultiQubitGate(selectedGate)) {\n      setPendingGate({ timeSlot });\n      setControlMode(gateInfo.needsTwoControls ? 'control1' : 'control1');\n      addGate(qubit, timeSlot); // Recursive call to start the flow\n      return;\n    }\n\n    const newGate: Gate = {\n      id: `gate-${Date.now()}-${Math.random()}`,\n      type: selectedGate,\n      qubit,\n      timeSlot,\n      angle: gateInfo.needsAngle ? rotationAngle : undefined,\n    };\n\n    setCircuit(prev => ({\n      ...prev,\n      gates: [...prev.gates, newGate],\n    }));\n  }, [selectedGate, getGateAt, pendingGate, controlMode, rotationAngle]);\n\n  const clearCircuit = useCallback(() => {\n    setCircuit(prev => ({ ...prev, gates: [] }));\n    setProbabilities([]);\n    setPendingGate(null);\n    setControlMode('control1');\n  }, []);\n\n  const setNumQubits = useCallback((n: number) => {\n    setCircuit({ numQubits: n, numSlots: NUM_TIME_SLOTS, gates: [] });\n    setProbabilities([]);\n    setPendingGate(null);\n  }, []);\n\n  const selectGate = useCallback((gate: GateType) => {\n    if (selectedGate === gate) {\n      setSelectedGate(null);\n      setPendingGate(null);\n      setControlMode('control1');\n    } else {\n      setSelectedGate(gate);\n      setPendingGate(null);\n      setControlMode(GATE_INFO[gate].needsTwoControls ? 'control1' :\n                     (GATE_INFO[gate].needsControl || gate === 'SWAP' || gate === 'iSWAP' || gate === 'DCX') ? 'control1' : 'target');\n    }\n  }, [selectedGate]);\n\n  const simulateCircuit = useCallback(async () => {\n    setIsSimulating(true);\n\n    // Simulate the circuit (mock implementation for demo)\n    // In production, this would use the actual @moonlab/quantum-core\n    await new Promise(resolve => setTimeout(resolve, 300));\n\n    const numStates = Math.pow(2, circuit.numQubits);\n\n    // Sort gates by time slot for correct execution order\n    const sortedGates = [...circuit.gates].sort((a, b) => a.timeSlot - b.timeSlot);\n\n    // Complex amplitude simulation\n    // Each amplitude is [real, imag]\n    let amps: [number, number][] = new Array(numStates).fill(null).map((_, i) => i === 0 ? [1, 0] : [0, 0]);\n\n    const sqrt2 = Math.sqrt(2);\n\n    for (const gate of sortedGates) {\n      const q = gate.qubit;\n      const newAmps: [number, number][] = amps.map(a => [...a] as [number, number]);\n\n      switch (gate.type) {\n        case 'H': {\n          // Hadamard: |0⟩ → (|0⟩+|1⟩)/√2, |1⟩ → (|0⟩-|1⟩)/√2\n          for (let i = 0; i < numStates; i++) {\n            const bit = (i >> q) & 1;\n            const partner = bit === 0 ? i | (1 << q) : i & ~(1 << q);\n            if (bit === 0) {\n              newAmps[i] = [(amps[i][0] + amps[partner][0]) / sqrt2, (amps[i][1] + amps[partner][1]) / sqrt2];\n              newAmps[partner] = [(amps[i][0] - amps[partner][0]) / sqrt2, (amps[i][1] - amps[partner][1]) / sqrt2];\n            }\n          }\n          break;\n        }\n        case 'X': {\n          // Pauli-X: bit flip\n          for (let i = 0; i < numStates; i++) {\n            const flipped = i ^ (1 << q);\n            newAmps[i] = [...amps[flipped]];\n          }\n          break;\n        }\n        case 'Y': {\n          // Pauli-Y: |0⟩ → i|1⟩, |1⟩ → -i|0⟩\n          for (let i = 0; i < numStates; i++) {\n            const bit = (i >> q) & 1;\n            const flipped = i ^ (1 << q);\n            if (bit === 0) {\n              // |0⟩ → i|1⟩\n              newAmps[flipped] = [-amps[i][1], amps[i][0]];\n            } else {\n              // |1⟩ → -i|0⟩\n              newAmps[flipped] = [amps[i][1], -amps[i][0]];\n            }\n          }\n          break;\n        }\n        case 'Z': {\n          // Pauli-Z: phase flip on |1⟩\n          for (let i = 0; i < numStates; i++) {\n            const bit = (i >> q) & 1;\n            if (bit === 1) {\n              newAmps[i] = [-amps[i][0], -amps[i][1]];\n            }\n          }\n          break;\n        }\n        case 'S': {\n          // S gate: |1⟩ → i|1⟩\n          for (let i = 0; i < numStates; i++) {\n            const bit = (i >> q) & 1;\n            if (bit === 1) {\n              newAmps[i] = [-amps[i][1], amps[i][0]];\n            }\n          }\n          break;\n        }\n        case 'T': {\n          // T gate: |1⟩ → e^(iπ/4)|1⟩\n          const c = Math.cos(Math.PI / 4);\n          const s = Math.sin(Math.PI / 4);\n          for (let i = 0; i < numStates; i++) {\n            const bit = (i >> q) & 1;\n            if (bit === 1) {\n              newAmps[i] = [amps[i][0] * c - amps[i][1] * s, amps[i][0] * s + amps[i][1] * c];\n            }\n          }\n          break;\n        }\n        case 'Sdg': {\n          // S†: |1⟩ → -i|1⟩\n          for (let i = 0; i < numStates; i++) {\n            const bit = (i >> q) & 1;\n            if (bit === 1) {\n              newAmps[i] = [amps[i][1], -amps[i][0]];\n            }\n          }\n          break;\n        }\n        case 'Tdg': {\n          // T†: |1⟩ → e^(-iπ/4)|1⟩\n          const c = Math.cos(Math.PI / 4);\n          const s = Math.sin(Math.PI / 4);\n          for (let i = 0; i < numStates; i++) {\n            const bit = (i >> q) & 1;\n            if (bit === 1) {\n              newAmps[i] = [amps[i][0] * c + amps[i][1] * s, -amps[i][0] * s + amps[i][1] * c];\n            }\n          }\n          break;\n        }\n        case 'SX': {\n          // √X gate\n          for (let i = 0; i < numStates; i++) {\n            const bit = (i >> q) & 1;\n            const partner = i ^ (1 << q);\n            if (bit === 0) {\n              const a0 = amps[i], a1 = amps[partner];\n              newAmps[i] = [(a0[0] + a1[0] + a0[1] - a1[1]) / 2, (a0[1] + a1[1] - a0[0] + a1[0]) / 2];\n              newAmps[partner] = [(a0[0] + a1[0] - a0[1] + a1[1]) / 2, (a0[1] + a1[1] + a0[0] - a1[0]) / 2];\n            }\n          }\n          break;\n        }\n        case 'Rx':\n        case 'Ry':\n        case 'Rz': {\n          const theta = gate.angle || Math.PI / 2;\n          const c = Math.cos(theta / 2);\n          const s = Math.sin(theta / 2);\n          for (let i = 0; i < numStates; i++) {\n            const bit = (i >> q) & 1;\n            const partner = i ^ (1 << q);\n            if (bit === 0) {\n              const a0 = amps[i], a1 = amps[partner];\n              if (gate.type === 'Rx') {\n                newAmps[i] = [a0[0] * c + a1[1] * s, a0[1] * c - a1[0] * s];\n                newAmps[partner] = [a1[0] * c + a0[1] * s, a1[1] * c - a0[0] * s];\n              } else if (gate.type === 'Ry') {\n                newAmps[i] = [a0[0] * c - a1[0] * s, a0[1] * c - a1[1] * s];\n                newAmps[partner] = [a0[0] * s + a1[0] * c, a0[1] * s + a1[1] * c];\n              } else { // Rz\n                newAmps[i] = [a0[0] * c + a0[1] * s, a0[1] * c - a0[0] * s];\n                newAmps[partner] = [a1[0] * c - a1[1] * s, a1[1] * c + a1[0] * s];\n              }\n            }\n          }\n          break;\n        }\n        case 'CNOT': {\n          // Controlled-X\n          const ctrl = gate.controlQubit!;\n          for (let i = 0; i < numStates; i++) {\n            const ctrlBit = (i >> ctrl) & 1;\n            if (ctrlBit === 1) {\n              const flipped = i ^ (1 << q);\n              newAmps[i] = [...amps[flipped]];\n              newAmps[flipped] = [...amps[i]];\n            }\n          }\n          break;\n        }\n        case 'CZ': {\n          // Controlled-Z\n          const ctrl = gate.controlQubit!;\n          for (let i = 0; i < numStates; i++) {\n            const ctrlBit = (i >> ctrl) & 1;\n            const tgtBit = (i >> q) & 1;\n            if (ctrlBit === 1 && tgtBit === 1) {\n              newAmps[i] = [-amps[i][0], -amps[i][1]];\n            }\n          }\n          break;\n        }\n        case 'SWAP': {\n          // Swap two qubits\n          const q2 = gate.controlQubit!;\n          for (let i = 0; i < numStates; i++) {\n            const bit1 = (i >> q) & 1;\n            const bit2 = (i >> q2) & 1;\n            if (bit1 !== bit2) {\n              const swapped = i ^ (1 << q) ^ (1 << q2);\n              if (i < swapped) {\n                newAmps[i] = [...amps[swapped]];\n                newAmps[swapped] = [...amps[i]];\n              }\n            }\n          }\n          break;\n        }\n        case 'CCX': {\n          // Toffoli gate\n          const ctrl1 = gate.controlQubit!;\n          const ctrl2 = gate.controlQubit2!;\n          for (let i = 0; i < numStates; i++) {\n            const c1 = (i >> ctrl1) & 1;\n            const c2 = (i >> ctrl2) & 1;\n            if (c1 === 1 && c2 === 1) {\n              const flipped = i ^ (1 << q);\n              newAmps[i] = [...amps[flipped]];\n              newAmps[flipped] = [...amps[i]];\n            }\n          }\n          break;\n        }\n        case 'I':\n        case 'Barrier':\n          // No operation\n          break;\n        default:\n          // Other gates - no-op for now\n          break;\n      }\n      amps = newAmps;\n    }\n\n    // Convert complex amplitudes to probabilities\n    const probs = amps.map(([re, im]) => re * re + im * im);\n    setProbabilities(probs);\n    setIsSimulating(false);\n  }, [circuit]);\n\n  // Draw amplitude bars\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n\n    const ctx = canvas.getContext('2d');\n    if (!ctx) return;\n\n    const width = canvas.width;\n    const height = canvas.height;\n\n    // Clear canvas\n    ctx.fillStyle = '#0d0d1a';\n    ctx.fillRect(0, 0, width, height);\n\n    // If no probabilities, show placeholder\n    if (probabilities.length === 0) {\n      ctx.fillStyle = '#404060';\n      ctx.font = '14px sans-serif';\n      ctx.textAlign = 'center';\n      ctx.fillText('Click \"Simulate\" to see results', width / 2, height / 2);\n      return;\n    }\n\n    const barWidth = Math.max(4, (width - 40) / probabilities.length - 2);\n    const maxHeight = height - 60;\n\n    // Draw bars\n    probabilities.forEach((prob, i) => {\n      const x = 20 + i * (barWidth + 2);\n      const barHeight = prob * maxHeight;\n      const y = height - 30 - barHeight;\n\n      // Bar gradient\n      const gradient = ctx.createLinearGradient(x, y + barHeight, x, y);\n      gradient.addColorStop(0, '#6496ff');\n      gradient.addColorStop(1, '#9966ff');\n      ctx.fillStyle = gradient;\n      ctx.fillRect(x, y, barWidth, barHeight);\n\n      // State label\n      if (probabilities.length <= 16) {\n        ctx.fillStyle = '#606080';\n        ctx.font = '10px monospace';\n        ctx.textAlign = 'center';\n        const label = i.toString(2).padStart(circuit.numQubits, '0');\n        ctx.fillText(`|${label}⟩`, x + barWidth / 2, height - 10);\n      }\n    });\n\n    // Y-axis\n    ctx.strokeStyle = '#303050';\n    ctx.lineWidth = 1;\n    ctx.beginPath();\n    ctx.moveTo(15, 20);\n    ctx.lineTo(15, height - 30);\n    ctx.stroke();\n\n    // Y-axis labels\n    ctx.fillStyle = '#606080';\n    ctx.font = '10px sans-serif';\n    ctx.textAlign = 'right';\n    ctx.fillText('1.0', 12, 25);\n    ctx.fillText('0.5', 12, height / 2);\n    ctx.fillText('0.0', 12, height - 32);\n  }, [probabilities, circuit.numQubits]);\n\n  // Draw simple Bloch sphere representation\n  useEffect(() => {\n    const canvas = blochCanvasRef.current;\n    if (!canvas) return;\n\n    const ctx = canvas.getContext('2d');\n    if (!ctx) return;\n\n    const width = canvas.width;\n    const height = canvas.height;\n    const cx = width / 2;\n    const cy = height / 2;\n    const radius = Math.min(width, height) / 2 - 30;\n\n    ctx.fillStyle = '#0d0d1a';\n    ctx.fillRect(0, 0, width, height);\n\n    // Draw sphere outline\n    ctx.strokeStyle = 'rgba(100, 150, 255, 0.3)';\n    ctx.lineWidth = 2;\n    ctx.beginPath();\n    ctx.arc(cx, cy, radius, 0, Math.PI * 2);\n    ctx.stroke();\n\n    // Draw axes\n    const drawAxis = (angle: number, label: string, color: string) => {\n      const x = cx + Math.cos(angle) * radius;\n      const y = cy + Math.sin(angle) * radius;\n      ctx.strokeStyle = color;\n      ctx.lineWidth = 1;\n      ctx.beginPath();\n      ctx.moveTo(cx, cy);\n      ctx.lineTo(x, y);\n      ctx.stroke();\n\n      ctx.fillStyle = color;\n      ctx.font = '12px sans-serif';\n      ctx.textAlign = 'center';\n      ctx.fillText(label, x + Math.cos(angle) * 15, y + Math.sin(angle) * 15 + 4);\n    };\n\n    drawAxis(-Math.PI / 2, '|0⟩', '#00ff88');\n    drawAxis(Math.PI / 2, '|1⟩', '#ff6688');\n    drawAxis(0, '+X', '#6496ff');\n    drawAxis(Math.PI, '-X', '#6496ff');\n\n    // Draw state vector based on probabilities\n    if (probabilities.length === 2) {\n      const theta = Math.acos(Math.sqrt(probabilities[0])) * 2;\n      const stateX = cx + Math.sin(theta) * radius * 0.9;\n      const stateY = cy - Math.cos(theta) * radius * 0.9;\n\n      // State vector arrow\n      ctx.strokeStyle = '#ffcc00';\n      ctx.lineWidth = 3;\n      ctx.beginPath();\n      ctx.moveTo(cx, cy);\n      ctx.lineTo(stateX, stateY);\n      ctx.stroke();\n\n      // Arrow head\n      ctx.fillStyle = '#ffcc00';\n      ctx.beginPath();\n      ctx.arc(stateX, stateY, 6, 0, Math.PI * 2);\n      ctx.fill();\n    }\n  }, [probabilities]);\n\n  const getPlacementHint = (): string => {\n    if (!selectedGate) return 'Select a gate from the palette';\n    const info = GATE_INFO[selectedGate];\n    if (info.needsTwoControls) {\n      if (controlMode === 'control1') return `Click to place first control for ${info.name}`;\n      if (controlMode === 'control2') return `Click to place second control for ${info.name}`;\n      return `Click to place target for ${info.name}`;\n    }\n    if (info.needsControl || selectedGate === 'SWAP' || selectedGate === 'iSWAP' || selectedGate === 'DCX') {\n      if (controlMode === 'control1') return `Click to place ${selectedGate === 'SWAP' || selectedGate === 'iSWAP' ? 'first qubit' : 'control'} for ${info.name}`;\n      return `Click to place ${selectedGate === 'SWAP' || selectedGate === 'iSWAP' ? 'second qubit' : 'target'} for ${info.name}`;\n    }\n    return `Click to place ${info.name}`;\n  };\n\n  return (\n    <div className=\"playground\">\n      <div className=\"section-header\">\n        <h1 className=\"section-title\">Quantum Circuit Playground</h1>\n        <p className=\"section-description\">\n          Build quantum circuits interactively. Select a gate, then click on the circuit grid to place it.\n        </p>\n      </div>\n\n      <div className=\"playground-layout\">\n        {/* Gate Palette */}\n        <div className=\"gate-palette\">\n          <h3 className=\"palette-title\">Gates</h3>\n\n          {Object.entries(GATE_CATEGORIES).map(([category, gates]) => (\n            <div key={category} className=\"gate-category\">\n              <button\n                className={`category-header ${expandedCategory === category ? 'expanded' : ''}`}\n                onClick={() => setExpandedCategory(expandedCategory === category ? '' : category)}\n              >\n                <span>{category}</span>\n                <span className=\"category-arrow\">{expandedCategory === category ? '▼' : '▶'}</span>\n              </button>\n              {expandedCategory === category && (\n                <div className=\"gate-grid\">\n                  {gates.map(gate => (\n                    <button\n                      key={gate}\n                      className={`gate-btn ${selectedGate === gate ? 'selected' : ''}`}\n                      style={{ borderColor: GATE_INFO[gate].color }}\n                      onClick={() => selectGate(gate)}\n                      title={GATE_INFO[gate].description}\n                    >\n                      <span className=\"gate-symbol\" style={{ color: GATE_INFO[gate].color }}>\n                        {GATE_INFO[gate].symbol || gate}\n                      </span>\n                      <span className=\"gate-name\">{GATE_INFO[gate].name}</span>\n                    </button>\n                  ))}\n                </div>\n              )}\n            </div>\n          ))}\n\n          {/* Rotation angle control */}\n          {selectedGate && GATE_INFO[selectedGate].needsAngle && (\n            <div className=\"palette-section\">\n              <h4>Rotation Angle</h4>\n              <div className=\"angle-control\">\n                <input\n                  type=\"range\"\n                  min=\"0\"\n                  max={2 * Math.PI}\n                  step={Math.PI / 8}\n                  value={rotationAngle}\n                  onChange={(e) => setRotationAngle(parseFloat(e.target.value))}\n                />\n                <span className=\"angle-value\">{(rotationAngle / Math.PI).toFixed(2)}π</span>\n              </div>\n              <div className=\"angle-presets\">\n                {[['π/4', Math.PI/4], ['π/2', Math.PI/2], ['π', Math.PI], ['3π/2', 3*Math.PI/2]].map(([label, val]) => (\n                  <button\n                    key={label}\n                    className={`angle-preset ${Math.abs(rotationAngle - (val as number)) < 0.01 ? 'selected' : ''}`}\n                    onClick={() => setRotationAngle(val as number)}\n                  >\n                    {label}\n                  </button>\n                ))}\n              </div>\n            </div>\n          )}\n\n          <div className=\"palette-section\">\n            <h4>Qubits ({circuit.numQubits})</h4>\n            <div className=\"qubit-selector\">\n              {Array.from({ length: MAX_QUBITS }, (_, i) => i + 1).map(n => (\n                <button\n                  key={n}\n                  className={`qubit-btn ${circuit.numQubits === n ? 'selected' : ''}`}\n                  onClick={() => setNumQubits(n)}\n                >\n                  {n}\n                </button>\n              ))}\n            </div>\n          </div>\n\n          <div className=\"palette-actions\">\n            <button className=\"btn btn-primary\" onClick={simulateCircuit} disabled={isSimulating}>\n              {isSimulating ? 'Simulating...' : 'Simulate'}\n            </button>\n            <button className=\"btn btn-secondary\" onClick={clearCircuit}>\n              Clear\n            </button>\n          </div>\n        </div>\n\n        {/* Circuit Editor */}\n        <div className=\"circuit-editor\">\n          <h3>Circuit</h3>\n          <div className=\"circuit-grid-container\">\n            {/* Time slot headers */}\n            <div className=\"time-slot-header\">\n              <div className=\"qubit-label-spacer\"></div>\n              {Array.from({ length: circuit.numSlots }, (_, t) => (\n                <div key={t} className=\"time-slot-label\">t{t}</div>\n              ))}\n              <div className=\"measurement-spacer\"></div>\n            </div>\n\n            {/* Qubit wires with grid cells */}\n            {Array.from({ length: circuit.numQubits }, (_, q) => (\n              <div key={q} className=\"qubit-row\">\n                <span className=\"qubit-label\">q{q}</span>\n                <div className=\"wire-grid\">\n                  {Array.from({ length: circuit.numSlots }, (_, t) => {\n                    const gate = getGateAt(q, t);\n                    const isPendingSlot = pendingGate?.timeSlot === t;\n                    const isControl1 = pendingGate?.controlQubit === q && isPendingSlot;\n                    const isControl2 = pendingGate?.controlQubit2 === q && isPendingSlot;\n\n                    // Check if this cell is part of a multi-qubit gate\n                    const multiGate = circuit.gates.find(g =>\n                      g.timeSlot === t && (g.controlQubit === q || g.controlQubit2 === q)\n                    );\n                    const isControlNode = !!multiGate && (multiGate.controlQubit === q || multiGate.controlQubit2 === q);\n\n                    // Render gate symbol\n                    const renderGateSymbol = () => {\n                      if (isControl1 || isControl2) {\n                        return (\n                          <div className=\"control-node pending\" title=\"Control qubit (pending)\">●</div>\n                        );\n                      }\n                      if (isControlNode && multiGate) {\n                        return (\n                          <div\n                            className=\"control-node\"\n                            style={{ color: GATE_INFO[multiGate.type].color }}\n                            title={`Control for ${multiGate.type}`}\n                          >●</div>\n                        );\n                      }\n                      if (gate && gate.qubit === q) {\n                        return (\n                          <div\n                            className={`gate-on-grid ${gate.type === 'Barrier' ? 'barrier' : ''}`}\n                            style={{ backgroundColor: GATE_INFO[gate.type].color }}\n                            title={`${GATE_INFO[gate.type].name}${gate.angle ? ` (${(gate.angle / Math.PI).toFixed(2)}π)` : ''}`}\n                          >\n                            {GATE_INFO[gate.type].symbol || gate.type}\n                          </div>\n                        );\n                      }\n                      return null;\n                    };\n\n                    return (\n                      <div\n                        key={t}\n                        className={`grid-cell ${selectedGate ? 'clickable' : ''} ${gate ? 'has-gate' : ''} ${isPendingSlot ? 'pending-slot' : ''}`}\n                        onClick={() => addGate(q, t)}\n                      >\n                        <div className=\"wire-segment\"></div>\n                        {renderGateSymbol()}\n                        {/* Draw connection line for multi-qubit gates */}\n                        {gate && gate.qubit === q && gate.controlQubit !== undefined && (\n                          <div\n                            className=\"gate-connection\"\n                            style={{\n                              height: `${Math.abs(gate.controlQubit - q) * 50}px`,\n                              top: gate.controlQubit < q ? `${(gate.controlQubit - q) * 50 + 25}px` : '25px',\n                              borderColor: GATE_INFO[gate.type].color,\n                            }}\n                          />\n                        )}\n                      </div>\n                    );\n                  })}\n                </div>\n                <span className=\"measurement\">M</span>\n              </div>\n            ))}\n          </div>\n          <p className={`hint ${pendingGate ? 'pending' : ''}`}>{getPlacementHint()}</p>\n          {pendingGate && (\n            <button className=\"btn btn-cancel\" onClick={() => { setPendingGate(null); setControlMode('control1'); }}>\n              Cancel Placement\n            </button>\n          )}\n        </div>\n\n        {/* Visualization */}\n        <div className=\"visualization-panel\">\n          <div className=\"viz-card\">\n            <h3>Probability Amplitudes</h3>\n            <canvas ref={canvasRef} width={400} height={200} className=\"viz-canvas\" />\n          </div>\n          {circuit.numQubits === 1 && (\n            <div className=\"viz-card\">\n              <h3>Bloch Sphere</h3>\n              <canvas ref={blochCanvasRef} width={200} height={200} className=\"viz-canvas\" />\n            </div>\n          )}\n          {probabilities.length > 0 && (\n            <div className=\"viz-card stats-card\">\n              <h3>Statistics</h3>\n              <div className=\"stats-grid\">\n                <div className=\"stat\">\n                  <span className=\"stat-label\">States</span>\n                  <span className=\"stat-value\">{probabilities.length}</span>\n                </div>\n                <div className=\"stat\">\n                  <span className=\"stat-label\">Non-zero</span>\n                  <span className=\"stat-value\">\n                    {probabilities.filter(p => p > 0.001).length}\n                  </span>\n                </div>\n                <div className=\"stat\">\n                  <span className=\"stat-label\">Max Prob</span>\n                  <span className=\"stat-value\">\n                    {(Math.max(...probabilities) * 100).toFixed(1)}%\n                  </span>\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Playground;\n"],"names":["GATE_INFO","NUM_TIME_SLOTS","MAX_QUBITS","GATE_CATEGORIES","Playground","circuit","setCircuit","useState","probabilities","setProbabilities","selectedGate","setSelectedGate","isSimulating","setIsSimulating","expandedCategory","setExpandedCategory","controlMode","setControlMode","pendingGate","setPendingGate","rotationAngle","setRotationAngle","canvasRef","useRef","blochCanvasRef","getGateAt","useCallback","qubit","timeSlot","g","isMultiQubitGate","type","info","addGate","gateInfo","existingGate","prev","newGate","clearCircuit","setNumQubits","n","selectGate","gate","simulateCircuit","resolve","numStates","sortedGates","a","b","amps","_","sqrt2","q","newAmps","i","bit","partner","flipped","c","s","a0","a1","theta","ctrl","ctrlBit","tgtBit","q2","bit1","bit2","swapped","ctrl1","ctrl2","c1","c2","probs","re","im","useEffect","canvas","ctx","width","height","barWidth","maxHeight","prob","x","barHeight","y","gradient","label","cx","cy","radius","drawAxis","angle","color","stateX","stateY","getPlacementHint","jsxs","jsx","category","gates","val","t","isPendingSlot","isControl1","isControl2","multiGate","isControlNode","renderGateSymbol","p"],"mappings":"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"}